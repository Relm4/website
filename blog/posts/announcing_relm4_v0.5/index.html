<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A long journey: Announcing Relm4 v0.5! | Relm4 blog</title><meta name=keywords content="relm4"><meta name=description content="After more than one year of development, Relm4 0.5 has finally made it across the finish line with plenty of new features and improvements! Without a doubt, version 0.5 is by far our largest release so far making Relm4 even easier, more stable and productive than before.
We can&rsquo;t fit all the improvements into this post so we&rsquo;ll only have a look at the most important new features added since the first beta release."><meta name=author content="Aaron Erhardt"><link rel=canonical href=https://relm4.org/blog/posts/announcing_relm4_v0.5/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.1efcd36e5512f3ce5066c3b68d676ccb71931901971a8545155d8d752993f1ec.css integrity="sha256-HvzTblUS885QZsO2jWdsy3GTGQGXGoVFFV2NdSmT8ew=" rel="preload stylesheet" as=style><link rel=icon href=https://relm4.org/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://relm4.org/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://relm4.org/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://relm4.org/blog/apple-touch-icon.png><link rel=mask-icon href=https://relm4.org/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="A long journey: Announcing Relm4 v0.5!"><meta property="og:description" content="After more than one year of development, Relm4 0.5 has finally made it across the finish line with plenty of new features and improvements! Without a doubt, version 0.5 is by far our largest release so far making Relm4 even easier, more stable and productive than before.
We can&rsquo;t fit all the improvements into this post so we&rsquo;ll only have a look at the most important new features added since the first beta release."><meta property="og:type" content="article"><meta property="og:url" content="https://relm4.org/blog/posts/announcing_relm4_v0.5/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-17T00:00:00+00:00"><meta property="article:modified_time" content="2023-02-17T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="A long journey: Announcing Relm4 v0.5!"><meta name=twitter:description content="After more than one year of development, Relm4 0.5 has finally made it across the finish line with plenty of new features and improvements! Without a doubt, version 0.5 is by far our largest release so far making Relm4 even easier, more stable and productive than before.
We can&rsquo;t fit all the improvements into this post so we&rsquo;ll only have a look at the most important new features added since the first beta release."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://relm4.org/blog/posts/"},{"@type":"ListItem","position":2,"name":"A long journey: Announcing Relm4 v0.5!","item":"https://relm4.org/blog/posts/announcing_relm4_v0.5/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A long journey: Announcing Relm4 v0.5!","name":"A long journey: Announcing Relm4 v0.5!","description":"After more than one year of development, Relm4 0.5 has finally made it across the finish line with plenty of new features and improvements! Without a doubt, version 0.5 is by far our largest release so far making Relm4 even easier, more stable and productive than before.\nWe can\u0026rsquo;t fit all the improvements into this post so we\u0026rsquo;ll only have a look at the most important new features added since the first beta release.","keywords":["relm4"],"articleBody":"After more than one year of development, Relm4 0.5 has finally made it across the finish line with plenty of new features and improvements! Without a doubt, version 0.5 is by far our largest release so far making Relm4 even easier, more stable and productive than before.\nWe can‚Äôt fit all the improvements into this post so we‚Äôll only have a look at the most important new features added since the first beta release. Check out the full changelog for more information.\nAbout Relm4 Relm4 is an idiomatic GUI library inspired by Elm and based on gtk4-rs.\nWe believe that GUI development should be easy, productive and delightful.\nThe gtk4-rs crate already provides everything you need to write modern, beautiful and cross-platform applications. Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours.\nAsync everything The first beta release of Relm4 v0.5 brought commands as a concept from Elm, which made asynchronous code very easy to integrate. Since then, we‚Äôve further extended async support, making it possible to use async from almost anywhere in Relm4. This fully unlocks the great potential of Rust‚Äôs async ecosystem and makes common tasks like interacting with network APIs a breeze.\nIn particular, asynchronous initialization of components greatly simplifies state management. Instead of immediately returning a model in an uninitialized state, you can fetch all the resources you need and eventually return a fully initialized model. On top of that, Relm4 allows you to show placeholder widgets while the model is being initialized.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 // Placeholder until `init_model` completes fn init_loading_widgets(root: \u0026mut Self::Root) -\u003e Option\u003cLoadingWidgets\u003e { view! { #[local_ref] root { set_orientation: gtk::Orientation::Horizontal, set_spacing: 10, gtk::Spinner { set_spinning: true, set_hexpand: true, set_halign: gtk::Align::Center, // Reserve vertical space set_height_request: 34, } } } Some(LoadingWidgets::new(root, spinner)) } // ... // Async initialization async fn init_model( value: Self::Init, _index: \u0026DynamicIndex, _sender: AsyncFactorySender\u003cSelf\u003e, ) -\u003e Self { // Asynchronously fetch data, sync information, etc. tokio::time::sleep(Duration::from_secs(1)).await; Self { value } } Your browser does not support the video tag. Widget templates Often, similar widgets and properties are used multiple times in the same application or even across different applications. With widget templates, you can define common UI elements as templates and reuse them easily.\n1 2 3 4 5 6 7 8 9 10 11 12 #[relm4::widget_template] impl WidgetTemplate for MyBox { view! { gtk::Box { set_margin_all: 10, inline_css: \"border: 2px solid blue\", gtk::Label { set_content: \"My custom box template!\", } } } } Using the template just requires the #[template] attribute in the macro.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #[relm4::component] impl SimpleComponent for AppModel { type Init = u8; type Input = AppMsg; type Output = (); view! { gtk::Window { set_title: Some(\"Widget template\"), // Using is my template #[template] MyBox { // We can still add additional children to out template! gtk::Label { #[watch] set_label: \u0026format!(\"Counter: {}\", model.counter), }, }, } } // ... } You can find more details in this PR.\nMacro improvements Sending messages from simple signal handlers has become a bit easier. Similar to the syntax of the relm crate, you can now send input messages with an arrow followed by the message.\n1 2 3 4 gtk::Button { set_label: \"Increment\", connect_clicked =\u003e AppMsg::Increment, } Tooling additions Recently, we published Relm4 snippets as an IDE extension that provides helpful snippets for implementing Relm4‚Äôs traits. This should help you saving some time while implementing common traits so you can fully focus on coding. The extension is available on the Visual Studio Marketplace and OpenVSIX.\nOther improvements Port relm4-components to 0.5 Port the book to 0.5 Move from custom documentation builds to docs.rs Add MessageBroker to allow communication between components at different levels Add Reducer as message based alternative to SharedState Lots of other improvements and fixes On the horizon Some tools haven‚Äôt made it into this stable release but will follow soon.\nrelm4-format is a tool that can format code inside the view macro to address the shortcomings of rustfmt regarding macros. relm4-cli is a planned client for developing Relm4 application that will make project setup, build system configuration and cross-compilation easy. If you want to support the our team working on these projects, please consider supporting Eduardo Flores.\nWhere to get started ‚¨ÜÔ∏è Migration guide üè† Website ‚≠ê Repository üìñ Book üìú Rust documentation üì® Chat room Special thanks We highly appreciate feedback and contributions to Relm4. In the name of all members of the Relm4 organization I thank those who helped with this release:\nAndy Russell for his continuous effort to improve Relm4. Eduardo Flores for his longstanding contributions to Relm4 and his work on Relm4 snippets. Pentamassiv for working on Relm4 and gtk-rs to bring our docs to docs.rs. Maksym Shcherbak for many improvements, especially to our examples. Tronta for contributing many book improvements. Sashin Exists for implementing several useful methods for FactoryVecDeque. Everyone else who contributed or gave feedback. The whole gtk-rs team for providing awesome Rust bindings for GTK. ","wordCount":"884","inLanguage":"en","datePublished":"2023-02-17T00:00:00Z","dateModified":"2023-02-17T00:00:00Z","author":{"@type":"Person","name":"Aaron Erhardt"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://relm4.org/blog/posts/announcing_relm4_v0.5/"},"publisher":{"@type":"Organization","name":"Relm4 blog","logo":{"@type":"ImageObject","url":"https://relm4.org/blog/favicon.ico"}}}</script></head><body class=dark id=top><header class=header><nav class=nav><div class=logo><a href=https://relm4.org/blog/ accesskey=h title="Relm4 blog (Alt + H)">Relm4 blog</a><div class=logo-switches></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://relm4.org/blog/>Home</a>&nbsp;¬ª&nbsp;<a href=https://relm4.org/blog/posts/>Posts</a></div><h1 class=post-title>A long journey: Announcing Relm4 v0.5!</h1><div class=post-meta><span title='2023-02-17 00:00:00 +0000 UTC'>February 17, 2023</span>&nbsp;¬∑&nbsp;5 min&nbsp;¬∑&nbsp;Aaron Erhardt&nbsp;|&nbsp;<a href=https://github.com/Relm4/blog/blob/main/content/posts/announcing_relm4_v0.5/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#about-relm4 aria-label="About Relm4">About Relm4</a></li><li><a href=#async-everything aria-label="Async everything">Async everything</a></li><li><a href=#widget-templates aria-label="Widget templates">Widget templates</a></li><li><a href=#macro-improvements aria-label="Macro improvements">Macro improvements</a></li><li><a href=#tooling-additions aria-label="Tooling additions">Tooling additions</a></li><li><a href=#other-improvements aria-label="Other improvements">Other improvements</a></li><li><a href=#on-the-horizon aria-label="On the horizon">On the horizon</a></li><li><a href=#where-to-get-started aria-label="Where to get started">Where to get started</a></li></ul><li><a href=#special-thanks aria-label="Special thanks">Special thanks</a></li></ul></div></details></div><div class=post-content><p>After more than one year of development, Relm4 0.5 has finally made it across the finish line with plenty of new features and improvements!
Without a doubt, version 0.5 is by far our largest release so far making Relm4 even easier, more stable and productive than before.</p><p>We can&rsquo;t fit all the improvements into this post so we&rsquo;ll only have a look at the most important new features added since the <a href=https://relm4.org/blog/posts/announcing_relm4_v0.5_beta>first beta release</a>.
Check out the <a href=https://github.com/Relm4/Relm4/blob/main/CHANGES.md>full changelog</a> for more information.</p><blockquote><h2 id=about-relm4>About Relm4<a hidden class=anchor aria-hidden=true href=#about-relm4>#</a></h2><p>Relm4 is an idiomatic GUI library inspired by <a href=https://elm-lang.org/>Elm</a> and based on <a href=https://crates.io/crates/gtk4>gtk4-rs</a>.</p><p>We believe that GUI development should be easy, productive and delightful.<br>The <a href=https://crates.io/crates/gtk4>gtk4-rs</a> crate already provides everything you need to write modern, beautiful and cross-platform applications.
Built on top of this foundation, Relm4 makes developing more idiomatic, simpler and faster and enables you to become productive in just a few hours.</p></blockquote><h2 id=async-everything>Async everything<a hidden class=anchor aria-hidden=true href=#async-everything>#</a></h2><p>The first beta release of Relm4 v0.5 brought <a href=/blog/posts/announcing_relm4_v0.5_beta/#commands>commands</a> as a concept from Elm, which made asynchronous code very easy to integrate.
Since then, we&rsquo;ve further extended async support, making it possible to use async from almost anywhere in Relm4.
This fully unlocks the great potential of Rust&rsquo;s async ecosystem and makes common tasks like interacting with network APIs a breeze.</p><p>In particular, asynchronous initialization of components greatly simplifies state management.
Instead of immediately returning a model in an uninitialized state, you can fetch all the resources you need and eventually return a fully initialized model.
On top of that, Relm4 allows you to show placeholder widgets while the model is being initialized.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// Placeholder until `init_model` completes
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>init_loading_widgets</span>(root: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>mut</span> Self::Root) -&gt; Option<span style=color:#f92672>&lt;</span>LoadingWidgets<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    view<span style=color:#f92672>!</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>#[local_ref]</span>
</span></span><span style=display:flex><span>        root {
</span></span><span style=display:flex><span>            set_orientation: <span style=color:#a6e22e>gtk</span>::Orientation::Horizontal,
</span></span><span style=display:flex><span>            set_spacing: <span style=color:#ae81ff>10</span>,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            gtk::Spinner {
</span></span><span style=display:flex><span>                set_spinning: <span style=color:#a6e22e>true</span>,
</span></span><span style=display:flex><span>                set_hexpand: <span style=color:#a6e22e>true</span>,
</span></span><span style=display:flex><span>                set_halign: <span style=color:#a6e22e>gtk</span>::Align::Center,
</span></span><span style=display:flex><span>                <span style=color:#75715e>// Reserve vertical space
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                set_height_request: <span style=color:#ae81ff>34</span>,
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    Some(LoadingWidgets::new(root, spinner))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Async initialization
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>init_model</span>(
</span></span><span style=display:flex><span>    value: <span style=color:#a6e22e>Self</span>::Init,
</span></span><span style=display:flex><span>    _index: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>DynamicIndex</span>,
</span></span><span style=display:flex><span>    _sender: <span style=color:#a6e22e>AsyncFactorySender</span><span style=color:#f92672>&lt;</span>Self<span style=color:#f92672>&gt;</span>,
</span></span><span style=display:flex><span>) -&gt; <span style=color:#a6e22e>Self</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Asynchronously fetch data, sync information, etc.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    tokio::time::sleep(Duration::from_secs(<span style=color:#ae81ff>1</span>)).<span style=color:#66d9ef>await</span>;
</span></span><span style=display:flex><span>    Self { value }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><video controls style=width:100%>
<source src=./async_factory.webm type=video/webm>Your browser does not support the video tag.</video><h2 id=widget-templates>Widget templates<a hidden class=anchor aria-hidden=true href=#widget-templates>#</a></h2><p>Often, similar widgets and properties are used multiple times in the same application or even across different applications.
With widget templates, you can define common UI elements as templates and reuse them easily.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[relm4::widget_template]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> WidgetTemplate <span style=color:#66d9ef>for</span> MyBox {
</span></span><span style=display:flex><span>    view<span style=color:#f92672>!</span> {
</span></span><span style=display:flex><span>        gtk::Box {
</span></span><span style=display:flex><span>            set_margin_all: <span style=color:#ae81ff>10</span>,
</span></span><span style=display:flex><span>            inline_css: <span style=color:#e6db74>&#34;border: 2px solid blue&#34;</span>,
</span></span><span style=display:flex><span>            gtk::Label {
</span></span><span style=display:flex><span>                set_content: <span style=color:#e6db74>&#34;My custom box template!&#34;</span>,
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Using the template just requires the <code>#[template]</code> attribute in the macro.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>#[relm4::component]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> SimpleComponent <span style=color:#66d9ef>for</span> AppModel {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Init</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>u8</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Input</span> <span style=color:#f92672>=</span> AppMsg;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Output</span> <span style=color:#f92672>=</span> ();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    view<span style=color:#f92672>!</span> {
</span></span><span style=display:flex><span>        gtk::Window {
</span></span><span style=display:flex><span>            set_title: Some(<span style=color:#e6db74>&#34;Widget template&#34;</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Using is my template
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#75715e>#[template]</span>
</span></span><span style=display:flex><span>            MyBox {
</span></span><span style=display:flex><span>                <span style=color:#75715e>// We can still add additional children to out template!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                gtk::Label {
</span></span><span style=display:flex><span>                    <span style=color:#75715e>#[watch]</span>
</span></span><span style=display:flex><span>                    set_label: <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>format</span><span style=color:#f92672>!</span>(<span style=color:#e6db74>&#34;Counter: {}&#34;</span>, model.counter),
</span></span><span style=display:flex><span>                },
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></td></tr></table></div></div><p>You can find more details in <a href=https://github.com/Relm4/Relm4/pull/310>this PR</a>.</p><h2 id=macro-improvements>Macro improvements<a hidden class=anchor aria-hidden=true href=#macro-improvements>#</a></h2><p>Sending messages from simple signal handlers has become a bit easier.
Similar to the syntax of the <a href=https://github.com/antoyo/relm#widget-attribute>relm crate</a>, you can now send input messages with an arrow followed by the message.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span>gtk::Button {
</span></span><span style=display:flex><span>    set_label: <span style=color:#e6db74>&#34;Increment&#34;</span>,
</span></span><span style=display:flex><span>    connect_clicked <span style=color:#f92672>=&gt;</span> AppMsg::Increment,
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=tooling-additions>Tooling additions<a hidden class=anchor aria-hidden=true href=#tooling-additions>#</a></h2><p>Recently, we published <a href=https://github.com/Relm4/vscode-relm4-snippets>Relm4 snippets</a> as an IDE extension that provides helpful snippets for implementing Relm4&rsquo;s traits.
This should help you saving some time while implementing common traits so you can fully focus on coding.
The extension is available on the <a href="https://marketplace.visualstudio.com/items?itemName=Relm4.relm4-snippets">Visual Studio Marketplace</a> and <a href=https://open-vsx.org/extension/Relm4/relm4-snippets>OpenVSIX</a>.</p><p><img loading=lazy src=./snippets.gif alt="Relm4 snippets"></p><h2 id=other-improvements>Other improvements<a hidden class=anchor aria-hidden=true href=#other-improvements>#</a></h2><ul><li>Port relm4-components to 0.5</li><li>Port the book to 0.5</li><li>Move from custom documentation builds to <a href=https://docs.rs/relm4/>docs.rs</a></li><li>Add <code>MessageBroker</code> to allow communication between components at different levels</li><li>Add <code>Reducer</code> as message based alternative to <code>SharedState</code></li><li>Lots of other improvements and fixes</li></ul><h2 id=on-the-horizon>On the horizon<a hidden class=anchor aria-hidden=true href=#on-the-horizon>#</a></h2><p>Some tools haven&rsquo;t made it into this stable release but will follow soon.</p><ul><li><a href=https://github.com/Relm4/Relm4/pull/385>relm4-format</a> is a tool that can format code inside the <code>view</code> macro to address the shortcomings of <code>rustfmt</code> regarding macros.</li><li>relm4-cli is a planned client for developing Relm4 application that will make project setup, build system configuration and cross-compilation easy.</li></ul><p>If you want to support the our team working on these projects, please consider supporting <a href=https://github.com/sponsors/edfloreshz>Eduardo Flores</a>.</p><h2 id=where-to-get-started>Where to get started<a hidden class=anchor aria-hidden=true href=#where-to-get-started>#</a></h2><ul><li>‚¨ÜÔ∏è <strong><a href=https://relm4.org/book/stable/0_4_to_0_5.html>Migration guide</a></strong></li><li>üè† <strong><a href=https://relm4.org>Website</a></strong></li><li>‚≠ê <strong><a href=https://github.com/Relm4/Relm4>Repository</a></strong></li><li>üìñ <strong><a href=https://relm4.org/book/stable>Book</a></strong></li><li>üìú <strong><a href=https://docs.rs/relm4>Rust documentation</a></strong></li><li>üì® <strong><a href=https://matrix.to/#/#relm4:matrix.org>Chat room</a></strong></li></ul><h1 id=special-thanks>Special thanks<a hidden class=anchor aria-hidden=true href=#special-thanks>#</a></h1><p>We highly appreciate feedback and contributions to Relm4.
In the name of all members of the Relm4 organization I thank those who helped with this release:</p><ul><li><a href=https://github.com/euclio>Andy Russell</a> for his continuous effort to improve Relm4.</li><li><a href=https://github.com/edfloreshz>Eduardo Flores</a> for his longstanding contributions to Relm4 and his work on Relm4 snippets.</li><li><a href=https://github.com/pentamassiv>Pentamassiv</a> for working on Relm4 and gtk-rs to bring our docs to docs.rs.</li><li><a href=https://github.com/MaksymShcherbak>Maksym Shcherbak</a> for many improvements, especially to our examples.</li><li><a href=https://github.com/tronta>Tronta</a> for contributing many book improvements.</li><li><a href=https://github.com/sashinexists>Sashin Exists</a> for implementing several useful methods for <code>FactoryVecDeque</code>.</li><li>Everyone else who contributed or gave feedback.</li><li>The whole gtk-rs team for providing awesome Rust bindings for GTK.</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://relm4.org/blog/tags/relm4/>relm4</a></li></ul><nav class=paginav><a class=next href=https://relm4.org/blog/posts/one_year_of_relm4/><span class=title>Next ¬ª</span><br><span>One year of Relm4</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share A long journey: Announcing Relm4 v0.5! on twitter" href="https://twitter.com/intent/tweet/?text=A%20long%20journey%3a%20Announcing%20Relm4%20v0.5%21&url=https%3a%2f%2frelm4.org%2fblog%2fposts%2fannouncing_relm4_v0.5%2f&hashtags=relm4"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A long journey: Announcing Relm4 v0.5! on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2frelm4.org%2fblog%2fposts%2fannouncing_relm4_v0.5%2f&title=A%20long%20journey%3a%20Announcing%20Relm4%20v0.5%21&summary=A%20long%20journey%3a%20Announcing%20Relm4%20v0.5%21&source=https%3a%2f%2frelm4.org%2fblog%2fposts%2fannouncing_relm4_v0.5%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A long journey: Announcing Relm4 v0.5! on reddit" href="https://reddit.com/submit?url=https%3a%2f%2frelm4.org%2fblog%2fposts%2fannouncing_relm4_v0.5%2f&title=A%20long%20journey%3a%20Announcing%20Relm4%20v0.5%21"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A long journey: Announcing Relm4 v0.5! on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frelm4.org%2fblog%2fposts%2fannouncing_relm4_v0.5%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A long journey: Announcing Relm4 v0.5! on whatsapp" href="https://api.whatsapp.com/send?text=A%20long%20journey%3a%20Announcing%20Relm4%20v0.5%21%20-%20https%3a%2f%2frelm4.org%2fblog%2fposts%2fannouncing_relm4_v0.5%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share A long journey: Announcing Relm4 v0.5! on telegram" href="https://telegram.me/share/url?text=A%20long%20journey%3a%20Announcing%20Relm4%20v0.5%21&url=https%3a%2f%2frelm4.org%2fblog%2fposts%2fannouncing_relm4_v0.5%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://relm4.org/blog/>Relm4 blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>